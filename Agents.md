# 任务指导

必须全程使用简体中文思考和对话！！！

## 概况

这个目录下的文档都是被用户认为比较紊乱的旧文档，现在要对他们进行分析和重新组织。

之前这些文档含有一些对AI agent的指令，主要是AI_AGENT.md和general下的所有文档

## 结构粗调期望

### 粗调效果

整理前：现在是AI_AGENT.md和general目录下的所有.md文档，

整理后：AI_AGENT.md改为AI-AGENT.md仅保留general目录下的文档，且将内容重新组织为下述文件：

- AI-AGENT.md：让agent注意到ai-agent-memory目录

general目录：

这个目录的用处是汇聚所有ai-agent相关文档，并提供仅需少量修改内容或文件名的模板文件或是可供用于直接复制到ai-agent-memory的原文件

这次改动大致方向是，保留now-task.md的设计，提取`_user`的内容放到`_project`中，不再需要用户级文档，提取其他的所有文档内容然后重新组织，仅保留以下文档：

- README.md：本目录的自述文档，并指导用户如何从此处拷贝文档放到正确的位置和使用文档
- AI-AGENT_general.md：所有通用任务适用的指令都放这个文档
- AI-AGENT_programming.md：编程相关任务适用的指令都放这个文档
- AI-AGENT_check.md：每次行动之前都要检查的项目，放在这个文档

然后其他保留下来的文档是：

- now-task.md：待用户编辑的文档，让用户描述任务内容，需要AI按照其他文档指令的要求，对任务内容进行优化并经过用户确认后再执行
- AI-AGENT_project.md：这个文档用来供用户复制到新项目目录的根路径下并重命名，相当于本项目中的AI-AGENT.md，项目级文档

除了AI-AGENT_project.md，其他的文档在实际使用时都应复制到新项目目录下的ai-agent-memory目录下

## 内容重构期望

在粗调的基础上，对内容逻辑重新组织，

把下面的所有内容加入到前面提到的文档中，加入到指令体系中，

### 大意

把任务实现流程设计为几个大环节，把AI-AGENT_***.md内容分配到每个环节中，适当建立新的文件，分别用于：必须在所有环节都要遵循的指令、仅单独在某一个环节要遵循的指令。把总的指令和某环节专用指令放在几个不同的文件中。

### working-status

任务开始时新建一个AI-AGENT_working-status.md文档，用于记录当前AI-AGENT的工作状态和保留历史工作状态痕迹，

在每一次操作前，都要检查当前工作状态是正在进行哪个环节的操作，必须和AI-AGENT_working-status.md中的最新记录的环节一致才继续操作，若不一致则说明情况出现异常，应进行检查，

创建和更新记录的时机为：初次进入第一个环节时，创建此文档并建立第一个记录；后续每当完成一个环节时，在即将进入下一个环节之前，应该更新此文档，在文档首部插入最新的状态记录，也就是说，在已经从旧的环节结束进入新的环节时，此时去检查文档中记录的状态，应该要是新的环节状态才是对的，（必须要在旧的环节结束时更新状态文档，而不是新的环节开始时更新，开始时须检查状态，确认是否一致，）

你来拟定合适的记录格式，只要满足：每条记录都要记下三个信息，由mcp-server-time获取的实时时间戳、短述、新的状态、项目状态概况，

短述在2到10个字内，内容例如：“初始状态”，“推进”，“返工”等，

项目状态概述在10到200个字内

### 环节设计

下面这是初步的设计，你应该在分析后深度思考是否合理，若你有更好的建议应向用户提出，根据用户的采纳结果更新此文档然后继续实现任务。

分为如下几个环节：

- 任务前置准备：完全阅读项目中的所有文档，然后按照规范要求分析并思考now-task.md中的任务，优化任务内容后创建新的文档记录优化后的任务要求
- 流程设计：根据优化后的任务要求，梳理任务流程，制作流程图，
- 任务主体流程循环：这是由上一个环节的结果中流程图里一个个小环节组成的一个新的大环节，每当进入一个小环节（小流程步骤）都需要更新工作状态记录到AI-AGENT_working-status.md，在这个大环节中，根据小环节的反馈结果，有可能顺利推进也有可能会需要返工，
  - 也有可能在实际任务中发现某些之前环节的流程设计或者任务要求中的内容实际无法实现，此时可能需要返工重新设计以解决或绕过无法实现的部分，

- 验证结果：根据优化后的任务要求预定的结果，进行验证
- 文档更新：全面检查需要更新的文档，例如README.md、CHANGELOG.md等，进行维护更新
- 收尾：清理临时文件、多余的文件等需要清理的内容，恢复now-task.md，

