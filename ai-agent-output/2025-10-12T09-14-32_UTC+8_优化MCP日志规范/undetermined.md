# 待定项记录

## 🔍 待定项U001 - MCP调用记录格式与流程强化

---

### ✅ 方案S002 - 【建议采纳 +95分】

**📍 原文位置**：（general/AI-AGENT_mcp-rules.md，第12-13、23行）
> - **可追溯性**：每次调用结束后（除了这个新增写入行为本身）立即在 `ai-agent-output/YYYY-MM-DDTHH-MM-SS_UTC_任务简述/mcp-log.md` 中新增一条“工具调用简报”（触发原因、参数、结果概览、时间、是否重试）。
> 3. 在 `ai-agent-output/YYYY-MM-DDTHH-MM-SS_UTC_任务简述/mcp-log.md` 中补充失败说明和后续计划。

**🎯 优化方案**：
> 将日志载体统一调整为`mcp-log.csv`，规定标准字段（时间戳、服务、调用类型、参数摘要、输出摘要、后续动作），要求每次调用先用`mcp-time`生成时间戳再执行目标工具，并在调用完成后立即写入CSV；仅对用于记录日志的`mcp-time`和值得写入`mcp-log.csv`的写入操作本身允许免记录，同时保留`mcp-log.md`仅作说明文档。

**⚖️ 权衡分析**：
- ✅ **优势**（+50分）：统一为结构化数据，便于批量审计与分析。
- ✅ **优势**（+45分）：明确“先取时间戳→执行→写入CSV”的操作链，降低漏记概率。
- ❌ **风险**（-5分）：需要确保日志写入流程避免递归记录，执行者需理解例外条件。

---

## 🔍 待定项U002 - 任务内容优化阶段执行强化

---

### ✅ 方案S002 - 【建议采纳 +92分】

**📍 原文位置**：（general/AI-AGENT_general.md，第44-47行）
> ## 1. 任务前置准备
> 遵循`AI-AGENT_step-before.md`的要求，完成准备工作。
> 
> 每次进入新的子环节时更新工作状态。

**🎯 优化方案**：
> 在`AI-AGENT_general.md`补充“强制执行多维优化分析→将所有候选方案按模板写入undetermined.md→向用户一次性确认后方可进入下一环节；若判断不存在优化空间，也需列出评估依据待用户确认”说明，并同步更新`AI-AGENT_step-before.md`与`AI-AGENT_check.md`，形成从流程、操作细节到核对清单的闭环约束。

**⚖️ 权衡分析**：
- ✅ **优势**（+45分）：多文档联动，确保流程层面和执行细节均有明确约束。
- ✅ **优势**（+40分）：强调“无优化也需给出评估依据并等待确认”，减少遗漏风险。
- ❌ **风险**（-8分）：需同步修改多份文档，审核与维护成本略高。

---
