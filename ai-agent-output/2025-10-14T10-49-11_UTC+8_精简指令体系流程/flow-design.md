# 流程设计概览

## 核心目标
- 在`src/ai-agent-memo-3/`构建精简后的统一指令体系。
- 合并原通用、编程与MCP规范，保留关键模板与命令。
- 调整配套模板，移除`user-temp-opinion.md`与`mcp-log`相关流程。

## 主要交付物
| 文档/资源 | 输入来源 | 预期输出 | 备注 |
| --- | --- | --- | --- |
| `AI-AGENT_criterion.md` | `ai-agent-memo-1`相关文档、待定项S002决议 | 按六环节划分的三段式指引、MCP基准表、自检表 | 需控制每区块条目≤12条 |
| `AI-AGENT_step-before.md` | 原`ai-agent-memo-1/AI-AGENT_step-before.md`、`AI-AGENT_criterion.md`初稿 | 精简后的任务前置准备指引，强调执行前约束表格使用 | 与新流程保持一致 |
| `now-task.md` | 原模板、S002决议 | “任务描述+必填检查表”结构，指向新文档 | 强调填写约束与流程图需求 |
| 其他模板（如`undetermined-template.md`） | 现有模板内容 | 与新流程兼容的版本（如需） | 保留必要格式，移除废弃引用 |

## 执行子步骤
1. **确定`AI-AGENT_criterion.md`章节骨架**：
   - 六大环节 × 每环节三段（核心必做、补充细则、模板/命令）。
   - 追加“全程通用”总览、“MCP调用基准表”、“执行自检表”。
2. **细化各段落条目**：
   - 复用旧文档中的关键要求，删除冗余描述。
   - 标注保留的模板命令（如PlantUML）。
3. **整合MCP使用规则**：
   - 依据S002，提供触发场景、记录方式与注意事项。
4. **设计自检表**：
   - 将原`AI-AGENT_check.md`条目映射到单一表格，按环节排列。
5. **精简`AI-AGENT_step-before.md`**：
   - 对照`criterion`草稿，仅保留必要步骤。
   - 说明执行前约束表格的维护方式。
6. **重写`now-task.md`**：
   - 提供任务描述区+检查表区，强调输入信息质量。
7. **补充/调整模板**：
   - 视需要更新`undetermined-template.md`等附件。
8. **验证与回访**：
   - 使用自检表确认新指引自洽。

## 依赖与同步
- `AI-AGENT_criterion.md`需先完成骨架，再驱动其他文档修改。
- `AI-AGENT_step-before.md`与`now-task.md`依赖于`criterion`的术语与约束。
- 模板更新需与`AI-AGENT_criterion.md`引用对齐，避免死链或旧名词。

## 风险与缓解
| 风险 | 影响 | 缓解措施 |
| --- | --- | --- |
| 精简导致遗漏关键步骤 | 新流程执行不完整 | 在自检表中逐条对照旧文档确保覆盖 |
| MCP基准表信息不足 | 使用者不知何时调用工具 | 列出典型场景与最低记录要求，并引用状态记录做补充 |
| 模板引用旧目录 | 用户混淆新旧文档 | 在新文档显式声明`ai-agent-memo-1`仅供参考，所有操作使用`ai-agent-memo-3` |
| PlantUML命令或其他模板遗漏 | 作图流程断裂 | 在“模板/命令”区保留完整命令与字体设置说明 |

## 验证计划
- 完成`AI-AGENT_criterion.md`后，逐步回填其他文档并勾选“执行自检表”。
- 在进入任务主体流程前，更新状态记录并确认计划可执行。
