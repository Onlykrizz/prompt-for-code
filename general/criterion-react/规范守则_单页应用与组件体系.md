# 规范守则 - 单页应用与组件体系

## 项目类型
- 使用 React + TypeScript 构建的 SPA（Vite、CRA、Next.js App Router 客户端路由模式）。
- 关注组件库设计、路由管理、表单处理、模块拆分与国际化。

## 核心原则
### 1. 工程结构
- 采用 `src/` 下按领域或功能模块划分结构：`features/`、`components/`、`pages/`、`services/`、`hooks/`、`types/`。
- 使用绝对路径或 `tsconfig.json` 中 `paths` 配置管理导入，避免复杂相对路径。
- 统一 ESLint + Prettier + TypeScript 配置（推荐 `eslint-config-next` 或 `eslint-config-airbnb-typescript`），配合 Husky 提交前校验。

### 2. 组件开发
- 优先函数组件，启用 `useEffect`/`useMemo` 等 Hook 时遵循官方依赖规则。
- 拆分容器（Container）与展示组件，确保组件纯净、可复用。
- 表单推荐 `react-hook-form` + Zod/Yup 进行类型安全校验。
- 国际化使用 `react-intl`、`@formatjs` 或 `lingui`，结合动态语言包加载。

### 3. 类型管理
- 为组件 Props 定义明确接口，使用 `type`/`interface` 并导出复用。
- 使用 `React.FC` 仅在需要 children 类型推断时；其余场景直接定义函数。
- 通过 `enum`、`literal type`、`Discriminated Union` 构建强类型状态。

## 项目结构示例
```
spa-app/
├── src/
│   ├── main.tsx
│   ├── app/App.tsx
│   ├── features/
│   ├── components/
│   ├── hooks/
│   ├── services/
│   ├── routes/
│   └── styles/
├── public/
├── vite.config.ts
└── tsconfig.json
```

## 测试与交付
- 单元测试：Vitest/Jest + React Testing Library，针对组件行为与Hook逻辑。
- 端到端测试：Playwright/Cypress，覆盖主业务流程；在CI配置多浏览器矩阵。
- Lint/格式化：在CI执行 `pnpm lint`、`pnpm test --runInBand`，确保类型检查 `tsc --noEmit`。
- 构建：使用 Vite、esbuild 或 SWC 提升效率；生成 Source Map 并上传 Sentry。

## 参考资料
- [React.dev: Using TypeScript](https://react.dev/learn/typescript)
- [Best Practices for Structuring React TypeScript Projects](https://thiraphat-ps-dev.medium.com/best-practices-for-structuring-a-react-typescript-project-f5ee7f9a264e)
- [SitePoint: React with TypeScript Best Practices](https://www.sitepoint.com/react-with-typescript-best-practices/)
- [React Hook Form Docs](https://react-hook-form.com/)
