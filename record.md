# 项目分析记录

## 项目概述

这是一个构建用于通用 AI 代理的提示词模板项目，旨在为不同类型的开发任务提供专业化的AI代理指导文档。

## 项目结构分析

```
prompt-for-code/
├── ai-agent-memory/          # AI核心指令和记忆系统
├── general/               # 通用模板和指南
├── rust/                  # Rust语言项目模板集合
├── specialization-agents/ # 专业化开发代理定义
├── AI_AGENT.md             # 项目入口配置
├── README.MD             # 项目说明文档
└── CHANGELOG.md          # 变更日志
```

## 核心文档作用分析

### 1. ai-agent-memory目录 - 核心指令系统

这是整个项目的**核心控制中心**，包含AI代理的工作流程、规范和记忆系统。

#### AI_AGENT.md - 总控制文档
- **作用**：定义AI代理的整体工作流程和强制规范
- **核心内容**：
  - 任务管理和分步提交要求（强制使用TodoWrite，禁止批量提交）
  - 任务内容预处理机制（分析、优化、生成optimized-task.md）
  - 待定项处理流程（使用undetermined.md记录需要用户确认的问题）
- **意义**：确保所有任务执行都遵循统一的高质量标准

#### AI-AGENT_user.md - 全局用户规范
- **作用**：定义所有项目都必须遵守的基础规则
- **核心内容**：
  - 交流语言：永远使用简体中文
  - 文档管理：docs/用于正式文档，discuss/用于讨论方案
  - 代码架构：严格避免7种代码坏迹象（僵化、冗余、循环依赖、脆弱性、晦涩性、数据泥团、不必要的复杂性）
  - Run & Debug：必须使用scripts/目录下的.py脚本
  - Python规范：强类型、使用uv、.venv虚拟环境
- **意义**：建立统一的代码质量标准和开发规范

#### AI-AGENT_appointment-general.md - 通用任务执行规范
- **作用**：定义非编程任务的执行流程
- **核心内容**：
  - 前置准备：文档检阅、时间处理规范、复杂问题分析
  - 核心流程：设计优先原则（检阅文档 → 任务流程设计 → 执行 → 验证 → 文档更新 → 记录变更）
  - 不明确点识别：歧义性、目的不明确、优化机会、未知问题
  - 版本控制：分步提交规范、CHANGELOG维护
  - 任务完成清理：清理now-task.md、undetermined.md、更新版本号
- **意义**：确保通用任务也遵循结构化、可追溯的执行流程

#### AI-AGENT_appointment-program.md - 开发任务执行规范
- **作用**：定义编程开发任务的专业执行流程
- **核心内容**：
  - 编码原则：KISS、YAGNI、DRY、SOLID原则
  - 程序流程设计阶段：使用PlantUML绘制流程图，分层设计
  - 专业化代理选择规范：根据技术栈选择合适的子代理
  - 编码与测试：原则应用验证、单元测试、集成测试
  - Git工作流程：分支策略、约定式提交、语义化版本
- **意义**：将软件工程最佳实践融入开发流程，确保代码质量

#### AI-AGENT_appointment.md - 代理选择规范
- **作用**：定义专业化代理的选择标准
- **核心内容**：
  - Rust项目代理选择（cli/web/library/crossplatform/performance/programmer）
  - 通用编程代理（general-programmer）
  - 代理使用原则：优先专业化、支持协作开发
- **意义**：确保任务被分配给最合适的专业代理

#### AI-AGENT_check.md - 检查清单
- **作用**：提供任务各阶段的质量检查清单
- **核心内容**：
  - 任务开始前检查（文档检阅、分步提交计划、任务预处理）
  - 设计阶段检查（流程完整性、接口定义、依赖关系）
  - 执行阶段检查（编码原则、分步提交、文档同步）
  - 完成后检查（AI_AGENT.md更新、版本控制、任务清理）
- **意义**：通过系统化检查清单防止遗漏关键步骤

#### now-task.md - 当前任务描述
- **作用**：记录当前正在执行的任务内容
- **当前任务**：将AI-AGENT_appointment-program.md中的要求融入到specialization-agents下的子代理中，必须保留"核心开发流程"和"版本控制与分支管理"的内容
- **意义**：明确当前工作目标，避免任务偏离

#### undetermined-template.md - 待定项模板
- **作用**：定义记录待定问题的标准格式
- **核心内容**：
  - 编号规范（U<待定项编号>S<方案编号>）
  - 评分制（-100到100分）
  - 权衡分析（优势/风险具体评分）
  - 方案排序（按评分从低到高）
- **意义**：系统化管理需要用户决策的问题，确保决策透明

### 2. general目录 - 通用模板集合

包含可应用于任何项目的通用配置文件副本，作为新项目的起点。

### 3. rust目录 - Rust项目知识库

- **AI_AGENT_CLI应用模板.md**：命令行工具开发规范（clap、anyhow、配置管理）
- **AI_AGENT_Web服务模板.md**：Web服务开发规范（axum/actix-web、异步、数据库）
- **AI_AGENT_库项目模板.md**：库开发规范（API设计、feature管理、版本兼容性）
- **AI_AGENT_跨平台项目模板.md**：跨平台开发规范（条件编译、平台抽象）
- **AI_AGENT_高性能系统项目模板.md**：性能优化规范（内存优化、并发、SIMD）
- **Rust学习资源与实践指南.md**：学习路径和资源推荐
- **Rust项目开发规范-精简版AI_AGENT.md指南.md**：开发规范总结
- **Rust项目结构模板与配置指南.md**：项目结构最佳实践
- **Rust项目规模划分与特点.md**：项目规模分类标准
- **优秀Rust项目的关键特征与最佳实践.md**：质量标准参考

**意义**：为Rust开发提供全面的技术指导和最佳实践参考。

### 4. specialization-agents目录 - 专业化代理定义

每个文件定义一个专业化的开发代理，包含：
- **前置元数据**：name、description、model、color
- **核心编程原则**：KISS、YAGNI、DRY、SOLID
- **技术规范**：必需依赖、推荐依赖、项目结构
- **实现要求**：特定领域的最佳实践
- **代码质量标准**：避免7种代码坏迹象
- **文档和可维护性要求**

现有代理：
- **rust-cli-developer.md**：CLI应用开发专家
- **rust-web-developer.md**：Web服务架构师
- **rust-library-developer.md**：库项目开发专家
- **rust-crossplatform-developer.md**：跨平台架构师
- **rust-performance-developer.md**：高性能系统工程师
- **rust-programmer.md**：通用Rust编程
- **general-programmer.md**：通用多语言编程

**意义**：为不同开发场景提供专业化、领域化的AI代理，确保输出符合特定技术栈的最佳实践。

### 5. 项目级文档

#### AI_AGENT.md - 项目入口
- **作用**：项目级配置入口，指向ai-agent-memory目录
- **内容**：要求必须先阅读ai-agent-memory下的全部内容
- **意义**：确保AI代理加载完整的指令系统

#### README.MD - 项目说明
- **作用**：项目概述和结构说明
- **内容**：项目用途、目录结构、专业化代理列表
- **意义**：帮助用户快速理解项目组织

#### CHANGELOG.md - 变更日志
- **作用**：记录项目演进历史
- **版本管理**：遵循语义化版本规范
- **当前版本**：0.7.0（优化任务执行流程、分步提交规范）
- **意义**：提供可追溯的项目变更历史

## 项目设计哲学

### 1. 分层架构设计
- **核心层**：ai-agent-memory定义通用规范和工作流程
- **知识层**：rust目录提供技术知识库
- **执行层**：specialization-agents提供具体执行者

### 2. 关注点分离
- **通用规范**（AI-AGENT_user.md）：适用于所有项目
- **任务类型规范**（AI-AGENT_appointment-general.md vs AI-AGENT_appointment-program.md）：区分通用任务和编程任务
- **技术栈规范**（specialization-agents）：特定技术领域的专业指导

### 3. 质量保证机制
- **强制性检查清单**：确保每个阶段都经过验证
- **分步提交规范**：防止批量提交导致的混乱
- **待定项机制**：系统化处理不确定因素
- **原则应用验证**：确保编码原则落地

### 4. 可追溯性设计
- **CHANGELOG**：记录项目演进
- **Git提交规范**：约定式提交
- **文档同步**：代码变更时同步更新文档
- **决策记录**：保留重要决策的原因和过程

## 文档间的协作关系

```
AI_AGENT.md (入口)
    ↓
ai-agent-memory/AI_AGENT.md (总控)
    ↓
┌─────────────────┬─────────────────────┬────────────────┐
│ AI-AGENT_user.md  │ AI-AGENT_appointment  │ AI-AGENT_check.md│
│ (全局规范)      │ (执行流程)          │ (质量检查)     │
└─────────────────┴─────────────────────┴────────────────┘
                    ↓
            ┌───────────────────┐
            │ now-task.md       │
            │ (当前任务)        │
            └───────────────────┘
                    ↓
        任务预处理 (sequential-thinking)
                    ↓
        ┌──────────────────────────┐
        │ undetermined.md          │
        │ (待定项记录)             │
        └──────────────────────────┘
                    ↓
        用户确认 → optimized-task.md
                    ↓
        选择专业化代理 (AI-AGENT_appointment.md)
                    ↓
    ┌───────────────────────────────────┐
    │ specialization-agents/*          │
    │ (专业化代理执行)                 │
    └───────────────────────────────────┘
                    ↓
            执行 → 测试 → 文档更新
                    ↓
            分步提交 → CHANGELOG维护
                    ↓
            任务完成清理
```

## 项目的核心价值

1. **标准化AI代理行为**：通过详细的指导文档，确保AI输出的一致性和质量
2. **强制质量保证**：内置检查清单和原则验证机制
3. **领域专业化**：为不同技术栈提供专门优化的代理
4. **可维护性优先**：强调文档同步、版本控制、决策记录
5. **防御性设计**：通过待定项机制、分步提交、检查清单等多层防护避免错误
6. **知识积累**：rust目录作为知识库，持续积累最佳实践

## 当前任务的意义

当前任务（融入AI-AGENT_appointment-program.md到specialization-agents）的目标是：
- 将"核心开发流程"和"版本控制与分支管理"等编程规范融入到每个专业化代理中
- 确保每个代理不仅懂技术实现，还懂完整的开发流程和质量保证
- 实现从"写代码"到"专业开发"的升级

## 项目优势

1. **系统化**：完整的工作流程覆盖从任务分析到完成清理的全生命周期
2. **专业化**：针对不同场景的专业代理，避免一刀切
3. **可扩展**：清晰的架构便于添加新的代理和规范
4. **质量导向**：多层次的质量保证机制
5. **实用性**：基于真实项目经验总结的最佳实践

## 潜在改进方向

1. **自动化程度**：可以添加更多自动化检查脚本
2. **模板丰富度**：可以为更多技术栈添加专业代理
3. **案例库**：可以添加实际项目案例作为参考
4. **指标体系**：可以建立量化的代码质量评估指标
